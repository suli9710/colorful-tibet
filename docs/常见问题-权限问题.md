# å¸¸è§é—®é¢˜ - æƒé™é—®é¢˜

## ğŸ” apt å®‰è£…æƒé™é—®é¢˜

### é—®é¢˜æè¿°

åœ¨æ‰§è¡Œ `apt install` å‘½ä»¤æ—¶ï¼Œå‡ºç°ä»¥ä¸‹é”™è¯¯ï¼š
```
E: Could not open lock file /var/lib/dpkg/lock-frontend - open (13: Permission denied)
E: Unable to acquire the dpkg frontend lock (/var/lib/dpkg/lock-frontend), are you root?
```

### è§£å†³æ–¹æ¡ˆ

**åœ¨æ‰€æœ‰ `apt` å‘½ä»¤å‰åŠ  `sudo`ï¼š**

```bash
# âŒ é”™è¯¯
apt install openjdk-17-jdk -y

# âœ… æ­£ç¡®
sudo apt install openjdk-17-jdk -y
```

**å¸¸ç”¨å‘½ä»¤ï¼š**
```bash
# æ›´æ–°è½¯ä»¶åŒ…åˆ—è¡¨
sudo apt update

# å®‰è£…è½¯ä»¶åŒ…
sudo apt install <package-name> -y

# å‡çº§ç³»ç»Ÿ
sudo apt upgrade -y
```

### ä¸ºä»€ä¹ˆéœ€è¦ sudoï¼Ÿ

- `apt` å‘½ä»¤éœ€è¦ä¿®æ”¹ç³»ç»Ÿæ–‡ä»¶ï¼ˆå¦‚ `/var/lib/dpkg/`ï¼‰
- åªæœ‰ root ç”¨æˆ·æˆ–å…·æœ‰ sudo æƒé™çš„ç”¨æˆ·æ‰èƒ½æ‰§è¡Œ
- Ubuntu é»˜è®¤çš„ `ubuntu` ç”¨æˆ·é€šå¸¸æœ‰ sudo æƒé™

### éªŒè¯ sudo æƒé™

```bash
# æ£€æŸ¥å½“å‰ç”¨æˆ·æ˜¯å¦æœ‰ sudo æƒé™
sudo -v

# å¦‚æœæç¤ºè¾“å…¥å¯†ç ï¼Œè¯´æ˜æœ‰ sudo æƒé™
# å¦‚æœæç¤º "user is not in the sudoers file"ï¼Œè¯´æ˜æ²¡æœ‰æƒé™
```

---

## ğŸ” Docker æƒé™é—®é¢˜

### é—®é¢˜æè¿°

åœ¨æ‰§è¡Œ `systemctl start docker` æˆ– `docker` ç›¸å…³å‘½ä»¤æ—¶ï¼Œæç¤ºéœ€è¦è¾“å…¥å¯†ç æˆ–æƒé™ä¸è¶³ã€‚

### è§£å†³æ–¹æ¡ˆ

#### æ–¹æ¡ˆä¸€ï¼šä½¿ç”¨ sudoï¼ˆä¸´æ—¶è§£å†³ï¼‰

åœ¨æ‰€æœ‰éœ€è¦æƒé™çš„å‘½ä»¤å‰åŠ  `sudo`ï¼š

```bash
sudo systemctl start docker
sudo systemctl enable docker
sudo docker ps
sudo docker-compose up -d
```

#### æ–¹æ¡ˆäºŒï¼šå°†ç”¨æˆ·æ·»åŠ åˆ° docker ç»„ï¼ˆæ¨èï¼‰

è¿™æ ·å°±ä¸éœ€è¦æ¯æ¬¡éƒ½ä½¿ç”¨ `sudo`ï¼š

```bash
# å°†å½“å‰ç”¨æˆ·æ·»åŠ åˆ° docker ç»„
sudo usermod -aG docker $USER

# ä½¿é…ç½®ç”Ÿæ•ˆï¼ˆé€‰æ‹©ä»¥ä¸‹æ–¹å¼ä¹‹ä¸€ï¼‰
# æ–¹å¼ 1ï¼šé‡æ–°ç™»å½• SSH
exit
# ç„¶åé‡æ–°è¿æ¥æœåŠ¡å™¨

# æ–¹å¼ 2ï¼šä½¿ç”¨ newgrp å‘½ä»¤ï¼ˆç«‹å³ç”Ÿæ•ˆï¼‰
newgrp docker
```

éªŒè¯æ˜¯å¦ç”Ÿæ•ˆï¼š

```bash
# ä¸éœ€è¦ sudo å°±èƒ½æ‰§è¡Œ
docker ps
docker --version
```

#### æ–¹æ¡ˆä¸‰ï¼šä½¿ç”¨ root ç”¨æˆ·

å¦‚æœæ˜¯åœ¨è‡ªå·±çš„æœåŠ¡å™¨ä¸Šï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ root ç”¨æˆ·ï¼š

```bash
# åˆ‡æ¢åˆ° root ç”¨æˆ·
sudo su -

# æˆ–è€…ä½¿ç”¨ root ç”¨æˆ·ç™»å½•
ssh root@your-server-ip
```

### éªŒè¯ Docker æƒé™

```bash
# æµ‹è¯• Docker æ˜¯å¦æ­£å¸¸å·¥ä½œï¼ˆä¸éœ€è¦ sudoï¼‰
docker run hello-world

# å¦‚æœæˆåŠŸï¼Œè¯´æ˜æƒé™é…ç½®æ­£ç¡®
```

## ğŸ” æ–‡ä»¶æƒé™é—®é¢˜

### é—®é¢˜æè¿°

åœ¨åˆ›å»ºæˆ–ç¼–è¾‘æ–‡ä»¶æ—¶æç¤ºæƒé™ä¸è¶³ã€‚

### è§£å†³æ–¹æ¡ˆ

```bash
# ä½¿ç”¨ sudo ç¼–è¾‘æ–‡ä»¶
sudo nano /opt/colorful-tibet/.env

# ä¿®æ”¹æ–‡ä»¶æ‰€æœ‰è€…
sudo chown -R $USER:$USER /opt/colorful-tibet

# ä¿®æ”¹æ–‡ä»¶æƒé™
chmod 644 /opt/colorful-tibet/.env
```

## ğŸ” ç›®å½•æƒé™é—®é¢˜

### é—®é¢˜æè¿°

Docker å®¹å™¨æ— æ³•å†™å…¥æ•°æ®ç›®å½•ã€‚

### è§£å†³æ–¹æ¡ˆ

```bash
# ç¡®ä¿æ•°æ®ç›®å½•æƒé™æ­£ç¡®
sudo mkdir -p /opt/colorful-tibet/data
sudo mkdir -p /opt/colorful-tibet/logs
sudo chown -R $USER:$USER /opt/colorful-tibet/data
sudo chown -R $USER:$USER /opt/colorful-tibet/logs
```

## ğŸ“ å¿«é€Ÿæ£€æŸ¥æ¸…å•

1. âœ… æ˜¯å¦æœ‰ sudo æƒé™ï¼š`sudo -v`
2. âœ… Docker æœåŠ¡æ˜¯å¦å¯åŠ¨ï¼š`sudo systemctl status docker`
3. âœ… ç”¨æˆ·æ˜¯å¦åœ¨ docker ç»„ï¼š`groups`ï¼ˆåº”è¯¥çœ‹åˆ° `docker`ï¼‰
4. âœ… æ–‡ä»¶æƒé™æ˜¯å¦æ­£ç¡®ï¼š`ls -la /opt/colorful-tibet`
5. âœ… ç›®å½•æƒé™æ˜¯å¦æ­£ç¡®ï¼š`ls -ld /opt/colorful-tibet/data`

## ğŸ’¡ é€šç”¨è§„åˆ™

åœ¨ Ubuntu ç³»ç»Ÿä¸­ï¼Œä»¥ä¸‹å‘½ä»¤é€šå¸¸éœ€è¦ `sudo`ï¼š

- âœ… `apt` / `apt-get` - è½¯ä»¶åŒ…ç®¡ç†
- âœ… `systemctl` - ç³»ç»ŸæœåŠ¡ç®¡ç†
- âœ… `ufw` - é˜²ç«å¢™ç®¡ç†
- âœ… `nginx` - Nginx é…ç½®æµ‹è¯•å’Œé‡è½½
- âœ… `mysql` - MySQL ç®¡ç†ï¼ˆæŸäº›æ“ä½œï¼‰
- âœ… `certbot` - SSL è¯ä¹¦ç®¡ç†
- âœ… ä¿®æ”¹ç³»ç»Ÿç›®å½•ï¼ˆå¦‚ `/etc/`, `/var/`, `/opt/`ï¼‰

**ä¸éœ€è¦ sudo çš„å‘½ä»¤ï¼š**
- `docker` - å¦‚æœç”¨æˆ·å·²åœ¨ docker ç»„ä¸­
- `docker-compose` - å¦‚æœç”¨æˆ·å·²åœ¨ docker ç»„ä¸­
- `git` - å…‹éš†å’Œæ‹‰å–ä»£ç 
- `java`, `mvn`, `node`, `npm` - å¼€å‘å·¥å…·
- `tail`, `cat`, `ls` - æŸ¥çœ‹æ–‡ä»¶ï¼ˆé™¤éæ–‡ä»¶æƒé™é™åˆ¶ï¼‰

## ğŸ’¡ æœ€ä½³å®è·µ

1. **å¼€å‘ç¯å¢ƒ**ï¼šå°†ç”¨æˆ·æ·»åŠ åˆ° docker ç»„ï¼Œæ–¹ä¾¿ä½¿ç”¨
2. **ç”Ÿäº§ç¯å¢ƒ**ï¼šå¯ä»¥ä½¿ç”¨ root ç”¨æˆ·ï¼Œæˆ–é…ç½®ä¸“é—¨çš„éƒ¨ç½²ç”¨æˆ·
3. **å®‰å…¨è€ƒè™‘**ï¼šä¸è¦ç»™æ™®é€šç”¨æˆ·ä¸å¿…è¦çš„æƒé™

