# 高德地图 API 配置说明

根据[高德地图官方文档](https://lbs.amap.com/api/javascript-api-v2/guide/abc/jscode)，**2021年12月02日以后申请的 key 需要配合安全密钥一起使用**。

## 获取 API Key 和安全密钥

1. 访问 [高德开放平台](https://lbs.amap.com/)
2. 注册/登录账号
3. 进入控制台，创建应用
4. 在应用下创建 Key，选择"Web端(JS API)"
5. 复制生成的 **API Key** 和 **安全密钥（securityJsCode）**

> **注意**：安全密钥在创建 Key 时一起生成，请妥善保管。

## 配置 API Key 和安全密钥

在 `frontend/index.html` 文件中，需要配置两处：

### 1. 配置安全密钥（必须在加载地图API之前）

找到以下代码：

```html
<script type="text/javascript">
  window._AMapSecurityConfig = {
    securityJsCode: "YOUR_AMAP_SECURITY_JSCODE", // 替换为你的安全密钥
  };
</script>
```

将 `YOUR_AMAP_SECURITY_JSCODE` 替换为你获取的安全密钥。

### 2. 配置 API Key

找到以下代码：

```html
<script src="https://webapi.amap.com/maps?v=2.0&key=YOUR_AMAP_API_KEY"></script>
```

将 `YOUR_AMAP_API_KEY` 替换为你获取的 API Key。

### 完整配置示例

```html
<script type="text/javascript">
  window._AMapSecurityConfig = {
    securityJsCode: "你的安全密钥",
  };
</script>
<script src="https://webapi.amap.com/maps?v=2.0&key=你的API_KEY"></script>
```

## 安全建议

### 开发环境
- 可以使用明文方式配置（如上面的示例）
- 但**不要将包含真实密钥的代码提交到公开的代码仓库**

### 生产环境（推荐）
- **强烈建议使用代理服务器转发方式**，避免将安全密钥暴露在前端代码中
- 参考[官方文档](https://lbs.amap.com/api/javascript-api-v2/guide/abc/jscode)中的"通过代理服务器转发"部分
- 使用 Nginx 或其他反向代理服务器转发请求

## 注意事项

- API Key 是免费的，但需要实名认证
- 每个 Key 有每日调用次数限制（个人开发者通常为 30万次/天）
- **安全密钥必须与 API Key 配对使用**
- 请妥善保管你的 API Key 和安全密钥，不要提交到公开的代码仓库

## 功能说明

配置完成后，地图将支持以下功能：
- 显示所有体验店位置
- 点击标记查看详细信息
- 点击右侧门店列表自动定位
- 导航前往功能（打开高德地图导航）

